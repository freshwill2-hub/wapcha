[dotenv@17.2.3] injecting env (13) from .env -- tip: ⚙️  load multiple .env files with { path: ['.env.local', '.env'] }
🚀 Phase 2.6: 최고 이미지 선별 + 네이버 원본 이미지 보충 (v6)
======================================================================
⚙️  설정:
   - Shopify Table: mu6cjbedwo3m2tt
   - 최종 크기: 1200x1200px
   - 제품 비율: 75%
   - Gallery 최소 점수: 70점

✨ v6 개선 사항:
   ✅ 네이버 이미지: 제품 라인 이름까지 매칭 (브랜드+제품명)
   ✅ 세트 제품: 세트 이미지 우선, 없으면 개별 이미지 허용
   ✅ v5 기능 유지: 여러 제품 감지, 포장박스 감지


📥 NocoDB에서 3개 제품 가져오는 중...

✅ 3개 제품 발견


======================================================================
📦 제품 1/3 - ID: 1

🗑️  Step 0: 초기화 (오래된 이미지 제거)
   ✅ 초기화 완료!

🔍 Step 1: Oliveyoung 테이블에서 제품 정보 조회 중...
✅ 제품명 (EN): Ongreedients Skin Barrier Calming Lotion EX 220ml
✅ 제품명 (KR): 온그리디언츠 스킨 베리어 카밍 로션 이엑스 220ml
📋 제품 정보:
   - 브랜드: ongreedients
   - 제품 라인: skin barrier calming lotion ex
   - 용량: 220ml
   - 세트 여부: ❌ 개별 제품
📸 검증된 이미지 (올리브영): 6개

📊 Step 2: validated_images 평가 시작
──────────────────────────────────────────────────────────────────────

   이미지 1 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (860x999)
      🔍 여러 제품 감지 중... (개별 제품)
      ❌ 여러 제품 감지됨! (2개) - 이미지에 Ongreedients Skin Barrier Calming Lotion EX 제품이 2개 보입니다 (하나는 220ml 병, 다른 하나는 80ml 튜브).
      ⚠️  개별 제품인데 2개 감지 → 즉시 탈락!
      🎯 총점: 0/125점 (여러 제품 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 2 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 15/30점 (476x952)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 보이는 실물 제품은 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 로션 병 1개입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - The image only shows the product bottle itself, without any visible packaging box.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - The product is not cropped and the entire product is fully visible.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: YES
         BRAND: ongreedients
         PRODUCT_LINE: skin barrier calming lotion ex
         VOLUME: 220ml
         COUNT: 1
         REASON: 브랜드, 제품 라인, 용량이 모두 일치합니다.
      ✅ 정확한 제품 매칭! (+30점)
         → 브랜드, 제품 라인, 용량이 모두 일치합니다.
      🔍 세트 구성 분석 시작...
      ✅ 단일 제품 → 자동 20점
      🤖 이미지 품질 평가 중...
      📊 이미지 품질: 17/20점
      🎯 총점: 107/125점

      ⏳ 10초 대기... (Gemini API)

   이미지 3 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (840x980)
      🔍 여러 제품 감지 중... (개별 제품)
      ❌ 여러 제품 감지됨! (2개) - "Ongreedients Skin Barrier Calming Lotion EX 220ml" 로션 제품 병 1개와 "Ongreedients Skin Barrier Calming Lotion EX" 로션 튜브 1개가 보입니다.
      ⚠️  개별 제품인데 2개 감지 → 즉시 탈락!
      🎯 총점: 0/125점 (여러 제품 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 4 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 15/30점 (460x932)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에는 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 제품의 실물 용기 하나만 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 용기만 있고, 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - 제품 하단이 잘려있습니다.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 5 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 15/30점 (422x789)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에는 실물 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 제품 용기 1개가 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 용기만 보이고 포장 상자는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The product's bottom corner is cut off in the image.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 6 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 25/30점 (1024x1024)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 보이는 제품은 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 튜브 1개입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 튜브만 보이고 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - The product is fully visible from top to bottom with no cut-off parts.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: NO
         BRAND: ongredients
         PRODUCT_LINE: skin barrier calming lotion ex
         VOLUME: 80ml
         COUNT: 1
         REASON: 제품 용량이 80ml로, 요청하신 220ml와 일치하지 않습니다.
      ❌ 브랜드 불일치: ongredients ≠ ongreedients
         → 제품 용량이 80ml로, 요청하신 220ml와 일치하지 않습니다.
      ⚠️  다른 제품 감지 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


📊 평가 결과:
   - 올바른 제품: 1개
   - 포장박스 탈락: 0개
   - 여러 제품 탈락: 2개

✂️  Step 3: Main 1개 + Gallery 0-2개 선별
   - Main: 1개
   - Gallery 후보: 0개

📐 Step 4: 정규화 + 업로드

   1/1 처리 중...
      📐 크기 정규화 중...
      ✅ 정규화 완료: 1200x1200px
      📤 NocoDB 업로드 중...
      ✅ 완료!

💾 Step 5: main_image, gallery_images 저장
✅ 저장 완료!
   - main_image: 1개
   - gallery_images: 0개

🔍 Step 6: DB에서 실제 저장된 개수 확인
   ✅ DB 확인 완료:
      - Main: 1개
      - Gallery: 0개
   - 총: 1개

⚠️  부족함! (1/3개) → 네이버 보충 필요
   필요한 개수: 2개

🌐 Step 7: 네이버 원본 이미지 검색
======================================================================

🔍 네이버 이미지 검색 시작: "온그리디언츠 스킨 베리어 카밍 로션 이엑스 220ml"
   목표: 원본 이미지 15개 수집
   💡 전략: 썸네일 URL 파싱 → 원본 URL 추출 (클릭 불필요!)
   🔗 검색 URL: https://search.naver.com/search.naver?ssc=tab.image.all&where=image&sm=tab_jum&query=%EC%98%A8%EA%B7...
[32mINFO[39m [33m PlaywrightCrawler:[39m Starting the crawler.
   📄 페이지 로딩 중...
   ✅ DOM 로딩 완료
   ⏳ 이미지 렌더링 대기 중 (5초)...
   📸 스크린샷: /tmp/naver-final-1768527564976.png
   🔍 썸네일 이미지 URL 추출 중...

   ✅ 추출 완료: 15개

   📋 추출된 원본 URL:
      1. http://shop1.phinf.naver.net/20260102_221/17673464004957D9P3_JPEG/54545007351825212_674826534.jpg...
      2. http://shop1.phinf.naver.net/20251231_200/1767142758123mgk0S_JPEG/101275605228139582_297804370.jpg...
      3. http://blogfiles.naver.net/MjAyNTEyMTNfMTM5/MDAxNzY1NjE1NDk5NDk3.XaeqjBfCJOi_3FEKaqOrwctBkpXQZ9d0PSC...
      4. http://image.nmv.naver.net/blog_2025_12_03_1708/68rnG4AsOH_01.jpg...
      5. http://blogfiles.naver.net/MjAyNjAxMDdfMTc3/MDAxNzY3NzE0NTIyNjg2.jHpn21ZJ88eBc187sW5xpKRJNG3q9GnNnr1...
      6. http://blogfiles.naver.net/MjAyNTEyMTFfMTUy/MDAxNzY1NDYxNDUzNzEw.T9QCtt30XW8rdMvs1I1OT33oZC5VL6zK_Y8...
      7. http://blogfiles.naver.net/MjAyNTEyMDNfNTcg/MDAxNzY0NzM3NzkyMTEx.WJixdTFbQO4QWbMdsRz3_h1fvHfELdA5o3S...
      8. http://blogfiles.naver.net/MjAyNTA2MjZfOTkg/MDAxNzUwOTMzNTg4Mjgz.XQDy2cdHRG6jRLBLpzkOYQIylFWgxVwhiXD...
      9. http://blogfiles.naver.net/MjAyNDA3MDFfMTE1/MDAxNzE5ODMyNDk5MDIz.5HcSDIU4zWnTZQqZiIijKkq67Aq6h8eJRVm...
      10. http://blogfiles.naver.net/MjAyNTEyMDJfMjAw/MDAxNzY0NjA2MTgxNzY0.8h8BSOdSUbfHwX4noATvfvcFBwCK7vK0PEV...
      11. http://shop1.phinf.naver.net/20250710_207/1752104744813KOeDJ_PNG/6622737170991618_306921073.png...
      12. http://blogfiles.naver.net/MjAyNjAxMDFfMTYg/MDAxNzY3MjQxMDExNDk3.x3Jo9QKMhhdcb2A1kHNn39Di5JqXWCt1Had...
      13. http://shop1.phinf.naver.net/20250706_229/1751729382426r6edf_PNG/2739768491284550_856064849.png...
      14. http://shop1.phinf.naver.net/20260102_229/1767345213889YYSqo_JPEG/43806559696096557_698887071.jpg...
      15. http://shop1.phinf.naver.net/20250314_167/1741959437793SnWV0_JPEG/28528497785094811_378685174.jpg...
[32mINFO[39m [33m PlaywrightCrawler:[39m Crawler reached the maxRequestsPerCrawl limit of 1 requests and will shut down soon. Requests that are in progress will be allowed to finish.
[32mINFO[39m [33m PlaywrightCrawler:[39m Earlier, the crawler reached the maxRequestsPerCrawl limit of 1 requests and all requests that were in progress at that time have now finished. In total, the crawler processed 1 requests and will shut down.
[32mINFO[39m [33m PlaywrightCrawler:[39m Final request statistics:[90m {"requestsFinished":1,"requestsFailed":0,"retryHistogram":[1],"requestAvgFailedDurationMillis":null,"requestAvgFinishedDurationMillis":11050,"requestsFinishedPerMinute":5,"requestsFailedPerMinute":0,"requestTotalDurationMillis":11050,"requestsTotal":1,"crawlerRuntimeMillis":11417}[39m
[32mINFO[39m [33m PlaywrightCrawler:[39m Finished! Total 1 requests: 1 succeeded, 0 failed.[90m {"terminal":true}[39m
   🧹 Playwright 메모리 해제 중...
   ✅ 메모리 해제 완료

   ✅ 최종 수집: 15개 원본 이미지
   📋 사전 필터링: 15개
      (올리브영, 언박싱, 패키지, 박스 키워드 제외)

🖼️  Step 8: 네이버 이미지 처리
──────────────────────────────────────────────────────────────────────

   네이버 1/15:
   URL: http://shop1.phinf.naver.net/20260102_221/17673464004957D9P3_JPEG/54545007351825...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527565222-0.jpg)
      ✅ 크기: 1200x1200
      📏 원본: 1200x1200 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (368, 0) 248x763
      📐 확장: (343, 0) 298x916
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 2/15:
   URL: http://shop1.phinf.naver.net/20251231_200/1767142758123mgk0S_JPEG/10127560522813...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527587842-1.jpg)
      ✅ 크기: 1000x1000
      📏 원본: 1000x1000 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (569, 39) 257x433
      📐 확장: (543, 0) 308x520
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 3/15:
   URL: http://blogfiles.naver.net/MjAyNTEyMTNfMTM5/MDAxNzY1NjE1NDk5NDk3.XaeqjBfCJOi_3FE...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527605879-2.jpg)
      ✅ 크기: 1019x1020
      📏 원본: 1019x1020 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (247, 54) 526x876
      📐 확장: (194, 0) 631x1020
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 4/15:
   URL: http://image.nmv.naver.net/blog_2025_12_03_1708/68rnG4AsOH_01.jpg...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527624344-3.jpg)
      ✅ 크기: 560x560
      📏 원본: 560x560 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (27, 5) 500x377
      📐 확장: (0, 0) 560x452
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 5/15:
   URL: http://blogfiles.naver.net/MjAyNjAxMDdfMTc3/MDAxNzY3NzE0NTIyNjg2.jHpn21ZJ88eBc18...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527656382-4.jpg)
      ✅ 크기: 316x460
      ❌ 해상도 부족: 316x460

   네이버 6/15:
   URL: http://blogfiles.naver.net/MjAyNTEyMTFfMTUy/MDAxNzY1NDYxNDUzNzEw.T9QCtt30XW8rdMv...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527656678-5.jpg)
      ✅ 크기: 948x1352
      📏 원본: 948x1352 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      ⚠️  제품 못 찾음: 이미지에서 제품 본체를 찾을 수 없습니다.
      ⚠️  제품 위치 찾기 실패 - 원본 rembg만 적용
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 원본 rembg 처리 & 저장 완료!

   네이버 7/15:
   URL: http://blogfiles.naver.net/MjAyNTEyMDNfNTcg/MDAxNzY0NzM3NzkyMTEx.WJixdTFbQO4QWbM...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527664420-6.jpg)
      ✅ 크기: 548x547
      📏 원본: 548x547 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (100, 37) 346x484
      📐 확장: (65, 0) 415x547
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 8/15:
   URL: http://blogfiles.naver.net/MjAyNTA2MjZfOTkg/MDAxNzUwOTMzNTg4Mjgz.XQDy2cdHRG6jRLB...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527681504-7.jpg)
      ✅ 크기: 1000x1280
      📏 원본: 1000x1280 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (129, 468) 264x282
      📐 확장: (103, 440) 317x338
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 9/15:
   URL: http://blogfiles.naver.net/MjAyNDA3MDFfMTE1/MDAxNzE5ODMyNDk5MDIz.5HcSDIU4zWnTZQq...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527698544-8.jpg)
      ✅ 크기: 1170x324
      ❌ 해상도 부족: 1170x324

   네이버 10/15:
   URL: http://blogfiles.naver.net/MjAyNTEyMDJfMjAw/MDAxNzY0NjA2MTgxNzY0.8h8BSOdSUbfHwX4...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527698847-9.jpg)
      ✅ 크기: 1344x768
      📏 원본: 1344x768 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (402, 185) 161x408
      📐 확장: (386, 144) 193x490
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 11/15:
   URL: http://shop1.phinf.naver.net/20250710_207/1752104744813KOeDJ_PNG/662273717099161...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527716330-10.jpg)
      ✅ 크기: 455x549
      ❌ 해상도 부족: 455x549

   네이버 12/15:
   URL: http://blogfiles.naver.net/MjAyNjAxMDFfMTYg/MDAxNzY3MjQxMDExNDk3.x3Jo9QKMhhdcb2A...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527719168-11.jpg)
      ✅ 크기: 6145x6145
      📏 원본: 6145x6145 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (78, 148) 509x900
      📐 확장: (27, 58) 611x1080
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 13/15:
   URL: http://shop1.phinf.naver.net/20250706_229/1751729382426r6edf_PNG/273976849128455...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527738690-12.jpg)
      ✅ 크기: 1000x1000
      📏 원본: 1000x1000 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (59, 32) 330x931
      📐 확장: (26, 0) 396x1000
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 14/15:
   URL: http://shop1.phinf.naver.net/20260102_229/1767345213889YYSqo_JPEG/43806559696096...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527756526-13.jpg)
      ✅ 크기: 1200x1200
      📏 원본: 1200x1200 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (88, 32) 363x821
      📐 확장: (52, 0) 436x985
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

      ⏳ 10초 대기... (Gemini API)

   네이버 15/15:
   URL: http://shop1.phinf.naver.net/20250314_167/1741959437793SnWV0_JPEG/28528497785094...
      ⬇️  다운로드 시작...
      📥 다운로드 완료
      🔍 이미지 크기 확인 중... (/tmp/naver-input-1768527773424-14.jpg)
      ✅ 크기: 1878x1878
      📏 원본: 1878x1878 ✓
      🔍 크롭 좌표 요청 중...
      📥 이미지 다운로드 완료 (Base64 생성)
      🤖 Gemini API 호출 중... (타임아웃 30초)
      ✅ Gemini 응답 받음
      📍 좌표: (76, 354) 174x300
      📐 확장: (59, 324) 209x360
      🔪 크롭 실행 중...
      ✅ 크롭 완료
      🎨 배경 제거 + 흰색 배경 중...
      📍 Step 1: rembg 실행...
      📍 Step 2: 흰색 배경 추가...
      ✅ 완료!
      📤 크롭 & rembg 완료!

✅ 네이버 처리 완료: 12개

📊 Step 9: 네이버 이미지 평가
──────────────────────────────────────────────────────────────────────

   이미지 1 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 15/30점 (298x916)
      🔍 여러 제품 감지 중... (개별 제품)
      ❌ 여러 제품 감지됨! (2개) - 이미지에 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 제품의 실물 용기가 2개 보입니다.
      ⚠️  개별 제품인데 2개 감지 → 즉시 탈락!
      🎯 총점: 0/125점 (여러 제품 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 2 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 10/30점 (308x520)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 실물 제품 용기 하나가 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 용기만 있고, 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The product is cut off on the bottom and side.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 3 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (631x1020)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에는 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 제품 실물 1개만 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - There is no paper box or packaging case in the image, only the product bottle.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - The product is fully visible, with the cap, body, and bottom completely within the image frame and no part of it is cut off.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: NO
         BRAND: ongredients
         PRODUCT_LINE: skin barrier calming lotion
         VOLUME: UNKNOWN
         COUNT: 1
         REASON: 이미지에 용량 정보가 명시되어 있지 않아서 NO입니다.
      ❌ 브랜드 불일치: ongredients ≠ ongreedients
         → 이미지에 용량 정보가 명시되어 있지 않아서 NO입니다.
      ⚠️  다른 제품 감지 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 4 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 10/30점 (560x452)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 제품 용기 1개가 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 용기만 보이고 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The product is cut off on the bottom and left side.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 5 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 25/30점 (948x1352)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (0개) - 이미지에는 제품 용기가 보이지 않고, 모델의 얼굴에 로션이 발린 모습만 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 제품 용기 외에 별도의 포장 박스가 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - 제품이 아니라 로션이 얼굴에 발라져 있는 이미지만 있습니다.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 6 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 10/30점 (415x547)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에는 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 로션 실물 제품 하나만 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 본체만 있고 종이 상자나 패키지 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - The product is fully visible, including the cap, body, and base, and is not cut off.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: NO
         BRAND: ongreedients
         PRODUCT_LINE: skin barrier calming lotion
         VOLUME: UNKNOWN
         COUNT: 1
         REASON: 용량이 명시되어 있지 않아 확인할 수 없습니다.
      ✅ 브랜드 일치: ongreedients (+10점)
      ✅ 제품 라인 일치 (+10점)
      ⚠️  용량 미확인, 브랜드+라인 일치로 통과 (+3점)
      📊 타이틀 매칭: 23/30점
      🔍 세트 구성 분석 시작...
      ✅ 단일 제품 → 자동 20점
      🤖 이미지 품질 평가 중...
      📊 이미지 품질: 17/20점
      🎯 총점: 95/125점

      ⏳ 10초 대기... (Gemini API)

   이미지 7 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 10/30점 (317x338)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (0개) - 이미지에 제품이 없습니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 응답 파싱 실패
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - 응답 파싱 실패
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 8 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 10/30점 (193x490)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 해당 로션 제품 1개가 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 제품 본체만 보이고, 외부 포장 상자는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The top portion of the product is cut off.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 9 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (611x1080)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (0개) - 이미지에 보이는 제품이 없습니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에 제품 용기만 있고 포장 박스는 없습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The image is completely white, so it's impossible to determine if the product is complete or not.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 10 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 15/30점 (396x1000)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 로션 실물 제품 1개가 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 용기만 보이고 종이 상자 형태의 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The bottom part of the product is cut off in the image.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 11 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 15/30점 (436x985)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 "Ongreedients Skin Barrier Calming Lotion EX 220ml" 제품 용기 하나가 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 제품 자체의 용기만 보이고 종이 상자/외부 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The top and left parts of the product are cut off.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 12 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 10/30점 (209x360)
      🔍 여러 제품 감지 중... (개별 제품)
      ✅ 단일 제품 확인 (1개) - 이미지에 실물 제품(화장품 병)이 1개 보입니다.
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 제품 본체만 보이고 종이 상자는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - 제품의 하단 부분이 잘려 이미지에 완전히 포함되지 않았습니다.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


📊 네이버 평가 결과: 70점 이상 & 제품 라인 일치 1개

📐 Step 10: 네이버 이미지 정규화

   1/1 정규화 중...
      📐 크기 정규화 중...
      ✅ 정규화 완료: 1200x1200px
      📤 NocoDB 업로드 중...
      ✅ 완료!

🧹 임시 파일 정리 중...
   ✅ 1개 파일 삭제 완료

➕ Step 11: Gallery에 네이버 이미지 추가

✅ Gallery 업데이트 완료!
   - Main: 1개 (유지)
   - Gallery: 1개
      - 올리브영: 0개
      - 네이버: 1개
======================================================================

======================================================================
⏳ 다음 제품 처리 전 20초 대기...


======================================================================
📦 제품 2/3 - ID: 2

🗑️  Step 0: 초기화 (오래된 이미지 제거)
   ✅ 초기화 완료!

🔍 Step 1: Oliveyoung 테이블에서 제품 정보 조회 중...
✅ 제품명 (EN): Anua PRDN Hyaluronic Acid 100 Moisture Cream 60mL (Set of 2)
✅ 제품명 (KR): 아누아 피디알엔 히알루론산 100 수분크림 60mL 2입
📋 제품 정보:
   - 브랜드: anua
   - 제품 라인: prdn hyaluronic acid 100 moisture cream
   - 용량: 60ml
   - 세트 여부: ✅ 세트 제품
   - 세트 개수: 2개
📸 검증된 이미지 (올리브영): 5개

📊 Step 2: validated_images 평가 시작
──────────────────────────────────────────────────────────────────────

   이미지 1 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 15/30점 (695x899)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 제품 본체만 보이고 포장 상자는 없습니다.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - 두 제품 모두 완전히 보이며 이미지에 잘려진 부분이 없습니다.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: YES
         BRAND: Anua
         PRODUCT_LINE: PDRN + HYALURON
         VOLUME: 60ml
         COUNT: 2
         REASON: 브랜드명, 제품 라인명, 용량, 개수가 모두 일치합니다.
      ✅ 정확한 제품 매칭! (+30점)
         → 브랜드명, 제품 라인명, 용량, 개수가 모두 일치합니다.
      🔍 세트 구성 분석 시작...
      🎁 세트 제품: 2개 예상
      📊 세트 구성: 16/20점
      🤖 이미지 품질 평가 중...
      📊 이미지 품질: 17/20점
      🎯 총점: 103/125점

      ⏳ 10초 대기... (Gemini API)

   이미지 2 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (780x852)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 제품 본체(튜브)만 보이고 종이 상자나 패키지 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - Both products are fully visible and complete within the image boundaries.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: YES
         BRAND: Anua
         PRODUCT_LINE: PDRN + HYALURON
         VOLUME: 60ml
         COUNT: 2
         REASON: 브랜드, 제품 라인, 용량이 모두 일치하고 제품 개수도 2개입니다.
      ✅ 정확한 제품 매칭! (+30점)
         → 브랜드, 제품 라인, 용량이 모두 일치하고 제품 개수도 2개입니다.
      🔍 세트 구성 분석 시작...
      🎁 세트 제품: 2개 예상
      📊 세트 구성: 16/20점
      🤖 이미지 품질 평가 중...
      📊 이미지 품질: 17/20점
      🎯 총점: 108/125점

      ⏳ 10초 대기... (Gemini API)

   이미지 3 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (843x828)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 튜브만 있고, 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The top of one of the products is cut off.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 4 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (850x1000)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 튜브만 있고, 종이 상자/패키지 박스가 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The image only shows one product, and the product is not a set of two.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 5 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (839x839)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에 제품 용기만 보이고 포장 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ❌ 완성도: 0/25점 - The image only shows part of one product, and it is cropped.
      ⚠️  제품 불완전 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


📊 평가 결과:
   - 올바른 제품: 2개
   - 포장박스 탈락: 0개
   - 여러 제품 탈락: 0개

✂️  Step 3: Main 1개 + Gallery 0-2개 선별
   - Main: 1개
   - Gallery 후보: 1개

📐 Step 4: 정규화 + 업로드

   1/2 처리 중...
      📐 크기 정규화 중...
      ✅ 정규화 완료: 1200x1200px
      📤 NocoDB 업로드 중...
      ✅ 완료!

   2/2 처리 중...
      📐 크기 정규화 중...
      ✅ 정규화 완료: 1200x1200px
      📤 NocoDB 업로드 중...
      ✅ 완료!

💾 Step 5: main_image, gallery_images 저장
✅ 저장 완료!
   - main_image: 1개
   - gallery_images: 1개

🔍 Step 6: DB에서 실제 저장된 개수 확인
   ✅ DB 확인 완료:
      - Main: 1개
      - Gallery: 1개
   - 총: 2개

⚠️  부족함! (2/3개) → 네이버 보충 필요
   필요한 개수: 1개

🌐 Step 7: 네이버 원본 이미지 검색
======================================================================

🔍 네이버 이미지 검색 시작: "아누아 피디알엔 히알루론산 100 수분크림 60mL 2입"
   목표: 원본 이미지 10개 수집
   💡 전략: 썸네일 URL 파싱 → 원본 URL 추출 (클릭 불필요!)
   🔗 검색 URL: https://search.naver.com/search.naver?ssc=tab.image.all&where=image&sm=tab_jum&query=%EC%95%84%EB%88...
[32mINFO[39m [33m PlaywrightCrawler:[39m Starting the crawler.
[32mINFO[39m [33m PlaywrightCrawler:[39m Crawler reached the maxRequestsPerCrawl limit of 1 requests and will shut down soon. Requests that are in progress will be allowed to finish.
[32mINFO[39m [33m PlaywrightCrawler:[39m Earlier, the crawler reached the maxRequestsPerCrawl limit of 1 requests and all requests that were in progress at that time have now finished. In total, the crawler processed 1 requests and will shut down.
[32mINFO[39m [33m PlaywrightCrawler:[39m Final request statistics:[90m {"requestsFinished":0,"requestsFailed":0,"retryHistogram":[],"requestAvgFailedDurationMillis":null,"requestAvgFinishedDurationMillis":null,"requestsFinishedPerMinute":0,"requestsFailedPerMinute":0,"requestTotalDurationMillis":0,"requestsTotal":0,"crawlerRuntimeMillis":251}[39m
[32mINFO[39m [33m PlaywrightCrawler:[39m Finished! Total 0 requests: 0 succeeded, 0 failed.[90m {"terminal":true}[39m
   🧹 Playwright 메모리 해제 중...
   ✅ 메모리 해제 완료

   ✅ 최종 수집: 0개 원본 이미지
   ❌ 네이버 이미지를 찾을 수 없습니다.
   현재 상태로 완료: Main 1개 + Gallery 1개

======================================================================
⏳ 다음 제품 처리 전 20초 대기...


======================================================================
📦 제품 3/3 - ID: 3

🗑️  Step 0: 초기화 (오래된 이미지 제거)
   ✅ 초기화 완료!

🔍 Step 1: Oliveyoung 테이블에서 제품 정보 조회 중...
✅ 제품명 (EN): Dalba First Spray Serum 100ml (Set of 2)
✅ 제품명 (KR): 달바 퍼스트 스프레이 세럼 100ml 2개
📋 제품 정보:
   - 브랜드: dalba
   - 제품 라인: first spray serum
   - 용량: 100ml
   - 세트 여부: ✅ 세트 제품
   - 세트 개수: 2개
📸 검증된 이미지 (올리브영): 3개

📊 Step 2: validated_images 평가 시작
──────────────────────────────────────────────────────────────────────

   이미지 1 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 25/30점 (1000x1000)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - 이미지에는 제품 본체(스프레이 세럼)만 있고, 종이 상자나 패키지 박스는 보이지 않습니다.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - Two products are fully visible in the image.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: NO
         BRAND: d'Alba
         PRODUCT_LINE: FIRST SPRAY SERUM
         VOLUME: UNKNOWN
         COUNT: 2
         REASON: 이미지에 용량 정보가 명시되어 있지 않아 EXACT_MATCH는 NO이고, VOLUME은 UNKNOWN입니다. 브랜드명과 제품 라인은 일치합니다.
      ❌ 브랜드 불일치: d'alba ≠ dalba
         → 이미지에 용량 정보가 명시되어 있지 않아 EXACT_MATCH는 NO이고, VOLUME은 UNKNOWN입니다. 브랜드명과 제품 라인은 일치합니다.
      ⚠️  다른 제품 감지 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


      ⏳ 10초 대기... (Gemini API)

   이미지 2 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 25/30점 (1000x1000)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - The image only shows two bottles of the product, without any packaging box.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - 두 제품 모두 캡, 몸통, 하단이 잘리지 않고 이미지 안에 완전히 들어와 있습니다.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: NO
         BRAND: dalba
         PRODUCT_LINE: first spray serum
         VOLUME: UNKNOWN
         COUNT: 2
         REASON: 용량 정보가 이미지에 명확하게 나와있지 않아 EXACT_MATCH는 NO이며, VOLUME은 UNKNOWN입니다.
      ✅ 브랜드 일치: dalba (+10점)
      ✅ 제품 라인 일치 (+10점)
      ⚠️  용량 미확인, 브랜드+라인 일치로 통과 (+3점)
      📊 타이틀 매칭: 23/30점
      🔍 세트 구성 분석 시작...
      🎁 세트 제품: 2개 예상
      📊 세트 구성: 20/20점
      🤖 이미지 품질 평가 중...
      📊 이미지 품질: 15/20점
      🎯 총점: 108/125점

      ⏳ 10초 대기... (Gemini API)

   이미지 3 평가:
   ──────────────────────────────────────────────────────────────────
      📏 해상도: 20/30점 (840x1000)
      🎁 세트 제품 → 여러 제품 검사 생략
      📦 포장박스 감지 중...
      ✅ 포장박스 없음 - The image shows only the two bottles of serum without any packaging box.
      🔍 제품 완성도 검증 시작...
      ✅ 완성도: 25/25점 - Two bottles of d'Alba First Spray Serum 100ml are fully visible in the image.
      🔍 타이틀 매칭 확인 시작...
      🖼️  검사 대상: 크롭 이미지
      📄 Gemini 응답:
         EXACT_MATCH: NO
         BRAND: d'Alba
         PRODUCT_LINE: FIRST SPRAY SERUM
         VOLUME: UNKNOWN
         COUNT: 2
         REASON: 용량이 제품 라벨에 명시되어 있지 않아서 일치여부를 판단할 수 없습니다.
      ❌ 브랜드 불일치: d'alba ≠ dalba
         → 용량이 제품 라벨에 명시되어 있지 않아서 일치여부를 판단할 수 없습니다.
      ⚠️  다른 제품 감지 → 나머지 평가 생략
      🎯 총점: 0/125점 (자동 탈락)


📊 평가 결과:
   - 올바른 제품: 1개
   - 포장박스 탈락: 0개
   - 여러 제품 탈락: 0개

✂️  Step 3: Main 1개 + Gallery 0-2개 선별
   - Main: 1개
   - Gallery 후보: 0개

📐 Step 4: 정규화 + 업로드

   1/1 처리 중...
      📐 크기 정규화 중...
      ✅ 정규화 완료: 1200x1200px
      📤 NocoDB 업로드 중...
      ✅ 완료!

💾 Step 5: main_image, gallery_images 저장
✅ 저장 완료!
   - main_image: 1개
   - gallery_images: 0개

🔍 Step 6: DB에서 실제 저장된 개수 확인
   ✅ DB 확인 완료:
      - Main: 1개
      - Gallery: 0개
   - 총: 1개

⚠️  부족함! (1/3개) → 네이버 보충 필요
   필요한 개수: 2개

🌐 Step 7: 네이버 원본 이미지 검색
======================================================================

🔍 네이버 이미지 검색 시작: "달바 퍼스트 스프레이 세럼 100ml 2개"
   목표: 원본 이미지 15개 수집
   💡 전략: 썸네일 URL 파싱 → 원본 URL 추출 (클릭 불필요!)
   🔗 검색 URL: https://search.naver.com/search.naver?ssc=tab.image.all&where=image&sm=tab_jum&query=%EB%8B%AC%EB%B0...
[32mINFO[39m [33m PlaywrightCrawler:[39m The number of requests enqueued by the crawler reached the maxRequestsPerCrawl limit of 1 requests and no further requests will be added.
[32mINFO[39m [33m PlaywrightCrawler:[39m Starting the crawler.
[32mINFO[39m [33m PlaywrightCrawler:[39m Crawler reached the maxRequestsPerCrawl limit of 1 requests and will shut down soon. Requests that are in progress will be allowed to finish.
[32mINFO[39m [33m PlaywrightCrawler:[39m Earlier, the crawler reached the maxRequestsPerCrawl limit of 1 requests and all requests that were in progress at that time have now finished. In total, the crawler processed 1 requests and will shut down.
[32mINFO[39m [33m PlaywrightCrawler:[39m Final request statistics:[90m {"requestsFinished":0,"requestsFailed":0,"retryHistogram":[],"requestAvgFailedDurationMillis":null,"requestAvgFinishedDurationMillis":null,"requestsFinishedPerMinute":0,"requestsFailedPerMinute":0,"requestTotalDurationMillis":0,"requestsTotal":0,"crawlerRuntimeMillis":316}[39m
[32mINFO[39m [33m PlaywrightCrawler:[39m Finished! Total 0 requests: 0 succeeded, 0 failed.[90m {"terminal":true}[39m
   🧹 Playwright 메모리 해제 중...
   ✅ 메모리 해제 완료

   ✅ 최종 수집: 0개 원본 이미지
   ❌ 네이버 이미지를 찾을 수 없습니다.
   현재 상태로 완료: Main 1개 + Gallery 0개

======================================================================
🎉 Phase 2.6 완료!
======================================================================
✅ 3개 제품 처리 완료

✨ v6 개선 사항:
   ✅ 네이버 이미지: 제품 라인 이름까지 매칭
   ✅ 세트 제품: 세트 이미지 우선, 없으면 개별 허용
   ✅ v5 기능 유지: 여러 제품 감지, 포장박스 감지

